<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ù„Ø¹Ø¨Ø© Ø¬Ø±ÙŠ Ø¨Ø³ÙŠØ·Ø©</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(#87CEEB, #E0F6FF);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        #gameCanvas {
            border: 4px solid #333;
            background: #fff;
        }
        .instructions {
            position: absolute;
            top: 20px;
            font-family: Arial;
            color: #333;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="instructions">
        <h2>ğŸƒ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¬Ø±ÙŠ</h2>
        <p>Ø§Ø¶ØºØ· Ø²Ø± Ø§Ù„Ù…Ø³Ø§ÙØ© Ù„Ù„Ù‚ÙØ² | â¬…ï¸ â¡ï¸ Ù„Ù„ØªØ­Ø±Ùƒ</p>
        <p id="score">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</p>
    </div>
    <canvas id="gameCanvas" width="800" height="400"></canvas>

    <script>
        // Ù„Ø¹Ø¨Ø© Ø¬Ø±ÙŠ Ø¨Ø³ÙŠØ·Ø©
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');

        let player = {
            x: 50,
            y: 250,
            width: 40,
            height: 60,
            speed: 5,
            jumping: false,
            velocityY: 0,
            color: '#3498db'
        };

        let obstacles = [];
        let score = 0;
        let gameRunning = true;

        // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù‚Ø¨Ø§Øª
        function createObstacle() {
            obstacles.push({
                x: 800,
                y: 280,
                width: 30,
                height: 40,
                color: '#e74c3c'
            });
        }

        // Ø±Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨
        function drawPlayer() {
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            // Ø±Ø³Ù… Ø§Ù„Ø¹ÙŠÙˆÙ†
            ctx.fillStyle = 'white';
            ctx.fillRect(player.x + 25, player.y + 10, 8, 8);
            ctx.fillRect(player.x + 10, player.y + 10, 8, 8);
            
            // Ø±Ø³Ù… Ø§Ù„ÙÙ…
            ctx.fillStyle = '#e74c3c';
            ctx.fillRect(player.x + 15, player.y + 30, 15, 5);
        }

        // Ø±Ø³Ù… Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª
        function drawObstacles() {
            obstacles.forEach(obstacle => {
                ctx.fillStyle = obstacle.color;
                ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            });
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©
        function update() {
            if (!gameRunning) return;

            // Ø­Ø±ÙƒØ© Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª
            obstacles.forEach((obstacle, index) => {
                obstacle.x -= 5;
                
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª Ø§Ù„ØªÙŠ Ø®Ø±Ø¬Øª Ù…Ù† Ø§Ù„Ø´Ø§Ø´Ø©
                if (obstacle.x < -obstacle.width) {
                    obstacles.splice(index, 1);
                    score += 10;
                    scoreElement.textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${score}`;
                }
                
                // ÙƒØ´Ù Ø§Ù„Ø§ØµØ·Ø¯Ø§Ù…
                if (player.x < obstacle.x + obstacle.width &&
                    player.x + player.width > obstacle.x &&
                    player.y < obstacle.y + obstacle.height &&
                    player.y + player.height > obstacle.y) {
                    gameOver();
                }
            });

            // Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ©
            if (!player.jumping) {
                player.velocityY += 0.5;
            } else {
                player.velocityY -= 0.5;
                if (player.velocityY <= 0) {
                    player.jumping = false;
                }
            }

            player.y += player.velocityY;

            // Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¶
            if (player.y > 250) {
                player.y = 250;
                player.velocityY = 0;
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù‚Ø¨Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
            if (Math.random() < 0.02) {
                createObstacle();
            }
        }

        // Ø±Ø³Ù… Ø§Ù„Ø®Ù„ÙÙŠØ©
        function drawBackground() {
            // Ø§Ù„Ø³Ù…Ø§Ø¡
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Ø§Ù„Ø£Ø±Ø¶
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, 290, canvas.width, 110);
            
            // Ø§Ù„Ø¹Ø´Ø¨
            ctx.fillStyle = '#2ECC71';
            ctx.fillRect(0, 290, canvas.width, 10);
            
            // Ø³Ø­Ø§Ø¨Ø©
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(200, 100, 30, 0, Math.PI * 2);
            ctx.arc(230, 90, 40, 0, Math.PI * 2);
            ctx.arc(260, 100, 30, 0, Math.PI * 2);
            ctx.fill();
        }

        // Ø±Ø³Ù… ÙƒÙ„ Ø´ÙŠØ¡
        function draw() {
            drawBackground();
            drawPlayer();
            drawObstacles();
        }

        // Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function gameOver() {
            gameRunning = false;
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = 'white';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!', canvas.width/2, canvas.height/2 - 50);
            
            ctx.font = '36px Arial';
            ctx.fillText(`Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${score}`, canvas.width/2, canvas.height/2 + 20);
            
            ctx.font = '24px Arial';
            ctx.fillText('Ø§Ø¶ØºØ· R Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨', canvas.width/2, canvas.height/2 + 80);
        }

        // Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        const keys = {};
        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            
            if (e.key === ' ') {
                // Ù‚ÙØ²
                if (!player.jumping && player.y === 250) {
                    player.jumping = true;
                    player.velocityY = 15;
                }
            }
            
            if (e.key === 'r' || e.key === 'R') {
                // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
                if (!gameRunning) {
                    player = { x: 50, y: 250, width: 40, height: 60, speed: 5, jumping: false, velocityY: 0, color: '#3498db' };
                    obstacles = [];
                    score = 0;
                    gameRunning = true;
                    scoreElement.textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: 0`;
                }
            }
        });

        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        // Ø¯ÙˆØ±Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù…ÙØ§ØªÙŠØ­
        function handleKeys() {
            if (keys['ArrowRight'] || keys['d'] || keys['D']) {
                player.x += player.speed;
                if (player.x > canvas.width - player.width) {
                    player.x = canvas.width - player.width;
                }
            }
            
            if (keys['ArrowLeft'] || keys['a'] || keys['A']) {
                player.x -= player.speed;
                if (player.x < 0) {
                    player.x = 0;
                }
            }
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function startGame() {
            // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø£Ù† Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¬Ø§Ù‡Ø²Ø©
            if (window.parent) {
                window.parent.postMessage({
                    type: 'webgl-game-ready',
                    gameId: 'simple-runner'
                }, '*');
            }
            
            // Ø¨Ø¯Ø¡ Ø¯ÙˆØ±Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
            setInterval(handleKeys, 1000/60);
            gameLoop();
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = startGame;
    </script>
</body>
</html>
